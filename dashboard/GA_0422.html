<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
{% load static %}
<head>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K67XVD7');</script>
<!-- End Google Tag Manager -->

<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>未命名 1</title>

<!-- Google Analytics deeptradetest/demo-->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-195300374-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics deeptradetest/demo-->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M3HDSS63XL"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-M3HDSS63XL');

function FP_preloadImgs() {//v1.0
 var d=document,a=arguments; if(!d.FP_imgs) d.FP_imgs=new Array();
 for(var i=0; i<a.length; i++) { d.FP_imgs[i]=new Image; d.FP_imgs[i].src=a[i]; }
}

function FP_swapImg() {//v1.0
 var doc=document,args=arguments,elm,n; doc.$imgSwaps=new Array(); for(n=2; n<args.length;
 n+=2) { elm=FP_getObjectByID(args[n]); if(elm) { doc.$imgSwaps[doc.$imgSwaps.length]=elm;
 elm.$src=elm.src; elm.src=args[n+1]; } }
}

function FP_getObjectByID(id,o) {//v1.0
 var c,el,els,f,m,n; if(!o)o=document; if(o.getElementById) el=o.getElementById(id);
 else if(o.layers) c=o.layers; else if(o.all) el=o.all[id]; if(el) return el;
 if(o.id==id || o.name==id) return o; if(o.childNodes) c=o.childNodes; if(c)
 for(n=0; n<c.length; n++) { el=FP_getObjectByID(id,c[n]); if(el) return el; }
 f=o.forms; if(f) for(n=0; n<f.length; n++) { els=f[n].elements;
 for(m=0; m<els.length; m++){ el=FP_getObjectByID(id,els[n]); if(el) return el; } }
 return null;
}
</script>
 

</head>

<body onload="FP_preloadImgs(/*url*/'button1B.jpg',/*url*/'button1C.jpg')">

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K67XVD7"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<!-- Google CSE (noscript) -->
<script async src="https://cse.google.com/cse.js?cx=9cd8e193c47b8ede8"></script>
<div class="gcse-searchbox-only"></div>
<!-- End Google CSE (noscript) -->


<p>2021/04/22 GA4範例 搜尋 走勢圖</p>

<div id="player"></div>

<script>

window.onbeforeunload = sendVideoWatchedTime;
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var player;
function onYouTubeIframeAPIReady() {
player = new YT.Player('player', {
height: '400',   //此處可修改影片高度
width: '680',   //此處可修改影片寬度
videoId: 'Iw6XqF5Xh-g',  //記得將此處修改為自己的影片ID
events: {
'onStateChange': onPlayerStateChange }});}

　

//此處為影片播放行為捕捉的程式碼

function onPlayerStateChange(event) {   
if (event.data == YT.PlayerState.PLAYING) {
console.log('play');
ga('send', 'event', '揀選', 'Playing');
}


//此處為影片暫停行為捕捉的程式碼

if (event.data == YT.PlayerState.PAUSED) { 
console.log('paused, total: ' + player.getCurrentTime());
ga('send', 'event', '揀選', 'Pause', '於幾秒處按下暫停鍵: ' + Math.round(player.getCurrentTime()));
}

//此處為影片收視完畢行為捕捉的程式碼

if (event.data == YT.PlayerState.ENDED) {
console.log('video ended');
ga('send', 'event', '揀選', 'Complete')
}}

　

//此處為影片沒看完跳離頁面行為捕捉的程式碼

function sendVideoWatchedTime() {   
console.log('leaving... watched: ' + player.getCurrentTime() + 'seconds');
ga('send', 'event', '揀選', '沒看完跳離頁面', '於幾秒處關閉瀏覽器: ' + Math.round(player.getCurrentTime()));
}
</script>


<a href="{% url 'pages' 'GA_0422-2' %}">
<img src="{% static 'img/home/purchase_car.jpg' %}" class="card-img-top" alt="..." width="130px" height="40px">
</a>
<br>
<img src="{% static 'img/home/oil.jpg' %}" class="card-img-top" alt="..." width="680px" height="400px">
</body>

</html>
